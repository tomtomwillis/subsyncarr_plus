name: subsyncarr-plus

services:
  subsyncarr-plus:
    image: tomtomw123/subsyncarr-plus:latest
    container_name: subsyncarr-plus
    user: "1000:10"
    ports:
      - '3000:3000' # Web UI
    volumes:
      # Any path configured with SCAN_PATHS env var must be mounted
      # If no scan paths are specified, it defaults to scan `/scan_dir` like example below.
      # - /path/to/your/media:/scan_dir
      - /path/to/movies:/movies
      - /path/to/tv:/tv
      - /path/to/anime:/anime
      - ./data:/app/data # Persist database across restarts
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 768M      # Hard limit - increased for file-based logging and large runs
        reservations:
          memory: 128M      # Minimum guaranteed memory
    environment:
      - TZ=Etc/UTC # Replace with your own timezone
      - PUID=1000
      - PGID=10
      - CRON_SCHEDULE=0 0 * * * # Runs every day at midnight by default
      - SCAN_PATHS=/movies,/tv # Remember to mount these as volumes. Must begin with /. Default valus is `/scan_dir`
      - EXCLUDE_PATHS=/movies/temp,/tv/downloads # Exclude certain sub-directories from the scan
      - MAX_CONCURRENT_SYNC_TASKS=1 # Defaults to 1 if not set. Higher number will consume more CPU but sync your library faster
      - INCLUDE_ENGINES=ffsubsync,autosubsync # If not set, all engines are used by default
      # Timeout configuration (optional - uncomment and adjust if needed):
      # - SYNC_ENGINE_TIMEOUT_MS=1800000  # 30 minutes (default)
      # - SYNC_ENGINE_TIMEOUT_MS=3600000  # 60 minutes for very large files
      # - SYNC_ENGINE_TIMEOUT_MS=600000   # 10 minutes for smaller files
      # Web UI configuration (optional):
      # - WEB_PORT=3000                   # Port for web UI (default: 3000)
      # - WEB_HOST=127.0.0.1              # Host to bind to (default: 127.0.0.1, use 0.0.0.0 for all interfaces)
      # - DB_PATH=/app/data/subsyncarr-plus.db # SQLite database location (default: /app/data/subsyncarr-plus.db)
